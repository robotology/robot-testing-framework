define("layout/util/dataPreparationsForAnchors",["utils","lodash"],function(a,b){"use strict";function e(){return{flat:{},sortingY:{},minHeight:{},toBottomDistance:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},valueForFirstLockedAnchor:{}}}function f(a,b){var c=a.id;a.layout&&a.layout.rotationInDegrees&&(b.noHeightChange[c]=!0),"Page"===a.type?b.toBottomDistance[c]=0:("Document"===a.type||"wysiwyg.viewer.components.PagesContainer"===a.componentType)&&(b.ignoreOriginalValue[c]=!0)}function g(a,b,c){var d=c*Math.PI/180;return parseInt(Math.abs(b*Math.sin(d))+Math.abs(a*Math.cos(d)),10)}function h(a,b,c){var d=a.id,e=a.layout?a.layout.rotationInDegrees:0,f=c.height[d],h=a.layout&&a.layout.y||0;b.currentHeight[a.id]=e?g(f,c.width[d],e):f,b.heightDiff[d]=b.currentHeight[a.id]-f,b.topDiff[d]=Math.ceil(b.heightDiff[d]/2),b.currentY[d]=e?h-b.topDiff[d]:h}function i(c,d,e,g,k,l){f(c,d,e),h(c,d,g),d.minHeight[c.id]=j(c,d),d.currentHeight[c.id]=Math.max(d.currentHeight[c.id],d.minHeight[c.id]),d.flat[c.id]=c;var m=d.currentY[c.id],n=k+m-l,o=d.currentHeight[c.id];d.sortingY[c.id]=n,d.valueForFirstLockedAnchor[c.id]={pusherId:null,value:-Number.MAX_VALUE};var p=a.dataUtils.getChildrenData(c,e);b.each(p,function(a){i(a,d,e,g,n,o||5e3)})}function j(a,b){var c=a.id;return c&&!k(c)?Math.max(b.minHeight[c]||0,d):b.minHeight[c]||0}function k(a){return a&&b.contains(c,a)}function l(a,b,c,d){i(a,b,c,d,0,0)}function m(a,b,c){return{distance:c,type:a,targetComponent:b,locked:!0,notEnforcingMinValue:!0}}function n(a,c,d,e){var f=a;a.$cloned||(f=b.clone(f),f.layout=b.clone(f.layout),f.layout.anchors=b.clone(f.layout.anchors),f.$cloned=!0);var g=f.layout.anchors;return g.push(m("TOP_TOP",c,d),m("BOTTOM_BOTTOM",c,e)),f}function o(a){b.forEach(a,function(c,d){if(c.layout&&c.layout.anchors){var e=b.filter(c.layout.anchors,{type:"LOCK_BOTTOM"});b.isEmpty(e)||(b.forEach(e,function(b){a[d]=n(a[d],b.targetComponent,b.topToTop,b.distance),a[b.targetComponent]=n(a[b.targetComponent],d,-1*b.topToTop,-1*b.distance)}),b.remove(a[d].layout.anchors,{type:"LOCK_BOTTOM"}))}})}function p(a,c,d){var f=e();f.containerHeightMargin=c.containerHeightMargin||{},f.minHeight=c.minHeight||{},l(a,f,d,c),o(f.flat);var g=b.sortBy(b.keys(f.flat),function(a){return f.sortingY[a]});return delete f.sortingY,{structureData:f,sortedIds:g}}function q(a,c){b.forEach(c.flat,function(b,d){a.height[d]=c.currentHeight[d]-c.heightDiff[d],a.top[d]=c.currentY[d]+c.topDiff[d]})}var c=["WIX_ADS"],d=5;return{getDataForAnchorsAndSort:p,fixMeasureMap:q}}),define("layout/util/anchors",["lodash","utils","layout/util/dataPreparationsForAnchors"],function(a,b,c){"use strict";function j(a,b,c,d){return b!==c&&(d[a]=!0),d[a]}function k(b,c,d,e){var f=d[e.targetComponent],g=d[c];e.notEnforcingMinValue&&!a.isEmpty(g)&&(e.notEnforcingMinValue=!1),f[c]=b;var h=Math.max.apply(null,a.values(f));return e.notEnforcingMinValue&&delete f[c],h}function l(a,b,c,d,e){var f=a.targetComponent,g=b.valueForFirstLockedAnchor[f];g&&(a.locked?(g.pusherId&&(c[f]={},c[f][g.pusherId]=g.value),delete b.valueForFirstLockedAnchor[f]):(g.pusherId=d,g.value=Math.max(e,g.value)))}function m(b,c,d,e){var f=c;return a.isNumber(e.toBottomDistance[d])?f+=e.toBottomDistance[d]:b.locked?f+=b.distance:(f+=h,e.ignoreOriginalValue[d]||(f=Math.max(f,b.originalValue))),f}function n(b,c,d,e){var f=b;return a.isNumber(e.minHeight[c])&&b<e.minHeight[c]&&(f=e.minHeight[c],d.notEnforcingMinValue&&(d.notEnforcingMinValue=!1,e.dirty[c]=!0)),f}function o(a,b){var c=b.flat[a];return c.layout?c.layout.anchors:[]}function p(b,c,d){function e(b){var e=o(b,d),f=Number.MAX_VALUE;return d.dirty[b]&&a.each(e,function(a){if(i[a.type]){var e=i[a.type](b,a,d)?c[a.targetComponent]:Number.MAX_VALUE;f=Math.min(e,f)}}),d.dirty[b]=!1,f}for(var f=b.length,g=0;f>g;){var h=e(b[g]);g=Math.min(g+1,h)}}function q(b,d,e,f){var g=c.getDataForAnchorsAndSort(b,d,e),h=g.structureData,i=g.sortedIds,j=a.invert(i);return h.dirty={},h.toTopAnchorsY={},h.toBottomAnchorsHeight={},a(h.flat).keys().each(function(a){h.dirty[a]=!0,h.toTopAnchorsY[a]={},h.toBottomAnchorsHeight[a]={}}),f||p(i,j,h),c.fixMeasureMap(d,h),h.flat}var d="TOP_TOP",e="BOTTOM_TOP",f="BOTTOM_BOTTOM",g="BOTTOM_PARENT",h=10,i={};return i[d]=function(a,b,c){var d=b.targetComponent,e=c.currentY[d],f=c.currentY[a]+b.distance;return l(b,c,c.toTopAnchorsY,a,null),f=k(f,a,c.toTopAnchorsY,b),c.currentY[d]=f,j(d,e,f,c.dirty)},i[e]=function(a,b,c){var d=b.targetComponent,e=c.currentY[d],f=c.currentHeight[a]+c.currentY[a],g=null;return b.locked?f+=b.distance:(g=f+h,f=c.valueForFirstLockedAnchor[d]?Math.max(f+h,b.originalValue):g),f=Math.max(f,c.currentY[a]+c.currentHeight[a]/2),l(b,c,c.toTopAnchorsY,a,g),f=k(f,a,c.toTopAnchorsY,b),c.currentY[d]=f,j(d,e,f,c.dirty)},i[g]=function(a,b,c){var d=b.targetComponent;if(c.flat[d].layout&&c.flat[d].layout.rotationInDegrees)return!1;var e=c.currentHeight[d],f=c.currentHeight[a]+c.currentY[a],g=c.containerHeightMargin[d]||0,h=m(b,f+g,d,c);return h=n(h,d,b,c),h=k(h,a,c.toBottomAnchorsHeight,b),c.currentHeight[d]=h,j(d,e,h,c.dirty)},i[f]=function(a,b,c){var d=b.targetComponent;if(c.flat[d].layout&&c.flat[d].layout.rotationInDegrees)return!1;var e=c.currentHeight[d],f=c.currentHeight[a]+c.currentY[a],g=c.currentY[d],h=m(b,f-g,d,c);return h=n(h,d,b,c),h=k(h,a,c.toBottomAnchorsHeight,b),c.currentHeight[d]=h,j(d,e,h,c.dirty)},{enforceAnchors:q}}),define("layout/util/singleCompLayout",["zepto","lodash"],function(a,b){"use strict";function g(a,b,c,d){var f=c.layout?c.layout.height:-1,g=c.layout?c.layout.width:-1,h=d.isDeadComp[a];!h&&e[c.componentType]?(d.height[a]=Math.max(b.offsetHeight,f),d.width[a]=Math.max(b.offsetWidth,g)):(d.height[a]=f>=0?f:b.offsetHeight,d.width[a]=g>=0?g:b.offsetWidth,d.innerWidth[a]=g>=0?g:b.clientWidth)}function h(a){return a.getAttribute("data-dead-comp")}function i(a,b){if(!a)return!1;var c=b(a);return c?c:!1}function j(a,b,c,e,f,j){var k=b.id,l=i(k,c);if(l){f[k]=l,g(k,l,a,e);var m=h(l);m&&(e.isDeadComp[k]=!0),!m&&d[b.type]&&d[b.type](k,e,f,j,b)}}function k(a,c,e,g,j){var k=a.id,l=i(k,c);if(l&&!h(l)&&f[a.type]){var m=f[a.type];"function"==typeof m&&(m=m(j,k,g,a)),b.each(m,function(f){var h=b.isPlainObject(f),i=h?f.pathArray:f,l=c.apply(void 0,[k].concat(i));if(l){var m=i.join(""),n=k+m;g[n]=l,e.height[n]=l.offsetHeight,e.width[n]=l.offsetWidth,e.innerWidth[n]=l.clientWidth,h&&d[f.type]&&d[f.type](n,e,g,j,a)}})}}function l(b,c,d){a(c[b]).css({top:d.top[b],height:d.height[b]})}function m(a,b,d,e){var f=a.id;l(f,b,d);var g=d.isDeadComp[f],h=!1;return!g&&c[a.type]&&(h=c[a.type](f,b,d,a,e)),h}var c={},d={},e={},f={};return{patchComponent:m,measureComponent:j,measureComponentChildren:k,isComponentDead:h,registerPatcher:function(a,b){c[a]=b},registerPatchers:function(a,d){c[a]=function(){var a=arguments;b.forEach(d,function(b){b.apply(null,a)})}},registerCustomMeasure:function(a,b){d[a]=b},registerRequestToMeasureDom:function(a){e[a]=!0},registerRequestToMeasureChildren:function(a,b){f[a]=b},maps:{classBasedMeasureChildren:f,classBasedCustomMeasures:d,classBasedPatchers:c}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","utils","layout/util/singleCompLayout"],function(a,b,c,d,e){"use strict";function g(a,b,c){var d={dataItem:null,propertiesItem:null,layout:a.layout,styleItem:null,id:a.id,type:a.componentType};return a.dataQuery&&(d.dataItem=b.getDataByQuery(a.dataQuery,c)),a.propertyQuery&&(d.propertiesItem=b.getDataByQuery(a.propertyQuery,c,b.dataTypes.PROPERTIES)),a.styleId&&(d.styleItem=b.getDataByQuery(a.styleId,c,b.dataTypes.THEME)),d}function h(a,c,d,f,h){var i=[];return b.each(b.keys(c),function(b){var j=g(c[b],f,h),k=e.patchComponent(j,a,d,f);k&&i.push(b)}),i}function i(a,c,d,e,f){var g=[];return b.forEach(a,function(a,b){g=g.concat(h(d,e[b],c,f,a.pageId))}),g}function j(a,c,f,h,i,k){var l=g(a,i,k),m=c(l.id);m&&(h[l.id]=m),e.measureComponentChildren(l,c,f,h,i),e.measureComponent(a,l,c,f,h,i);var n=d.dataUtils.getChildrenData(a,i);b.each(n,function(a){j(a,c,f,h,i,k)})}function k(a,c,d,e){c.width.screen=e.isMobileView()?320:e.getBodyClientWidth(),c.height.screen=document.documentElement.clientHeight,c.innerHeight.screen=window.innerHeight,c.innerWidth.screen=window.innerWidth,b.forOwn(a,function(a){j(a.structure,a.getDomNodeFunc,c,d,e,a.pageId)})}function l(a,d,e,f){var g={};return g.inner=c.enforceAnchors(a.inner.structure,d,e,f),d.height.SITE_PAGES&&(d.height.SITE_PAGES=d.height[a.inner.pageId]),b.forOwn(a,function(a,b){"inner"!==b&&(g[b]=c.enforceAnchors(a.structure,d,e,f))}),g}function m(a,c,e,f,g){a.id&&(f+=c.top[a.id],g+=a.layout&&a.layout.x?a.layout.x:0,c.absoluteTop[a.id]=f,c.absoluteLeft[a.id]=g);var h=d.dataUtils.getChildrenData(a,e);b.each(h,function(a){m(a,c,e,f,g)})}function n(a,c,d){var e=b.sortBy(b.keys(a),function(a){return"inner"===a?1:0});b.each(e,function(b){m(a[b].structure,c,d,"inner"===b?c.absoluteTop.SITE_PAGES:0,"inner"===b?c.absoluteLeft.SITE_PAGES:0)})}function o(a,c,g,h){var i=a.id&&c(a.id);if(!i||!e.isComponentDead(i)){i&&f[a.componentType]&&h.push({structure:a,domNode:i});var j=d.dataUtils.getChildrenData(a,g);b.forEach(j,function(a){o(a,c,g,h)})}}function p(a,c,d,e){var g=[];return b.forEach(a,function(a){var b=a.structure,h=f[b.componentType].measure(b,a.domNode,c,d,e);h&&g.push(a)}),b.forEach(a,function(a){var b=a.structure;f[b.componentType].patch(b,c,d,e)}),g}function q(a,c,d,e){var f=[];b.forOwn(a,function(a){o(a.structure,a.getDomNodeFunc,e,f)});for(var g=f,h=0;g.length&&3>h;)g=p(g,c,d,e),h++}function t(c){s=s||a("#SITE_CONTAINER");var d=s.offset()||{top:0};return{height:{},width:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},absoluteTop:{},absoluteLeft:{},isDeadComp:{},siteMarginBottom:(b.parseInt(a("#SITE_ROOT").css("padding-bottom"),10)||0)-c.onlyForEyesBottomAdditionalMargin(),siteOffsetTop:d.top}}function u(a,b,c){var d={},e=t(b);q(a,e,d,b),k(a,e,d,b);var f=l(a,e,b,c),g=i(a,e,d,f,b);return n(a,e,b),b.measureMap=e,g}var s,f={};return{registerLayoutInnerCompsFirst:function(a,b,c){f[a]={measure:b,patch:c}},registerPatcher:function(a,b){e.registerPatcher(a,b)},registerPatchers:function(a,b){e.registerPatchers(a,b)},registerCustomMeasure:function(a,b){e.registerCustomMeasure(a,b)},registerRequestToMeasureDom:function(a){e.registerRequestToMeasureDom(a)},registerRequestToMeasureChildren:function(a,b){e.registerRequestToMeasureChildren(a,b)},reLayout:u}}),define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]),a.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(a,b){var c=b.height[a+"buttonsContainer"];b.height[a]=Math.max(b.height[a],c),b.minHeight[a]=c})}),define("layout/specificComponents/fiveGridLineLayout",["zepto","layout/util/layout"],function(a,b){"use strict";var c=function(a,b,c,d,e){var f=b[a],g=c.width.screen,h=e.getSiteWidth(),i=0,j=h,k=d.propertiesItem;k&&k.fullScreenModeOn&&(g>h&&(i=-(g-h)/2,j=g),f.style.setProperty("width",j+"px"),f.style.setProperty("left",i+"px"))};b.registerPatcher("wysiwyg.viewer.components.FiveGridLine",c),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),b.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),b.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(b,c,d){var e=c.height[b+"line"],f=window.getComputedStyle(a(d[b])[0]),g=parseFloat(f.borderBottomWidth);c.height[b]=Math.max(5,g,e),c.minHeight[b]=e})}),define("layout/specificComponents/domainSearchLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a,b){var c=a+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(d){var e=d[0],f=d[1];b[e][c]>b[e][a]&&(b[f]||(b[f]={}),b[e][a]=b[f][a]=b[e][c])})}return c.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]),c.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",d),{}}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(a){"use strict";return a.registerRequestToMeasureDom("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),a.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),a.registerRequestToMeasureDom("tpa.viewer.components.Freestyle"),a.registerRequestToMeasureDom("tpa.viewer.components.Masonry"),a.registerRequestToMeasureDom("tpa.viewer.components.Collage"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.LinkBar"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/PinItPinWidgetLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",function(a,b,c){b.height[a]=c[a].offsetHeight}),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b){var c=a+"content";b.custom[a]=b.height[a]/2-b.height[c]/2}),a.registerPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b,c,d){var e,f,g,h,i;if(f=a+"tooltip",c.height[f]){e=a+"content";var j=d.propertiesItem.tooltipPosition;switch(j){case"top":i=-c.height[e]-14+"px",h=0;break;case"right":i=c.custom[a]+"px",h=c.width[a]+14+"px";break;case"bottom":i=c.height[a]+14+"px",h=0;break;case"left":i=c.custom[a]+"px",h="-414px";break;default:return}g=b[f].style,g.top=i,g.left=h}}),a.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function f(b,c,d,e,f,g,h){for(var i=0,j=null,k=0;k<d.length;k++){var l=e[k],m=l>0,n=b+d[k],o=c[n];m?(i++,j=o,a(o).css({width:l+"px",height:f-g.height+"px",position:"relative","box-sizing":"border-box",overflow:"visible"})):a(o).css({height:"0px",overflow:"hidden",position:"absolute"})}1===i&&(a(h).attr("data-listposition","lonely"),a(j).attr("data-listposition","lonely"))}function g(c,d,g,h,i){var j=g.height[c],l=e.nonHiddenPageIdsFromMainMenu(i),m=l.concat("__more__"),n=d[c+"moreContainer"];k(d[c],g.custom[c+"needTopOpenMenuUp"]);var o=g.custom[c+"menuItemContainerExtraPixels"],p=g.custom[c+"realWidths"];g.custom.originalGapBetweenTextAndBtn&&b.map(m,function(b){var e=a(d[c+b]);e.attr("data-originalGapBetweenTextAndBtn")||e.attr("data-originalGapBetweenTextAndBtn",g.custom.originalGapBetweenTextAndBtn[c+b+"label"])}),f(c,d,m,p,j,o,n)}function h(b){var c=b.lastChild,d=parseInt(a(c).css("margin-left"),10)||0,e=parseInt(a(c).css("margin-right"),10)||0;return d+e}function i(a){var b=parseFloat(a);return isFinite(b)?b:0}function j(b,c){var d=a(b).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),e=i(d["border-top-width"])+i(d["padding-top"]),f=i(d["border-bottom-width"])+i(d["padding-bottom"]),g=i(d["border-left-width"])+i(d["padding-left"]),h=i(d["border-right-width"])+i(d["padding-right"]);return c&&(e+=i(d["margin-top"]),f+=i(d["margin-bottom"]),g+=i(d["margin-left"]),h+=i(d["margin-right"])),{top:e,bottom:f,left:g,right:h,height:e+f,width:g+h}}function k(b,c){c?a(b).attr("data-dropmode","dropUp"):a(b).attr("data-dropmode","dropDown")}function l(b){var c=a(b)[0],d=0;do d+=c.offsetTop,c=c.offsetParent;while(null!==c);var e=d-(window.pageYOffset||document.body.scrollTop);return e>window.innerHeight/2}function m(a){var c=e.nonHiddenPageIdsFromMainMenu(a).concat("__more__"),d=[[]],f=[["moreContainer"]];return b.each(d,function(a){f=f.concat(b.map(c,function(b){return[b].concat(a)}))}),f}function n(c,d,f,g){var h=e.nonHiddenPageIdsFromMainMenu(f),i=h.concat("__more__");d.custom.labelWidths||(d.custom.labelWidths={}),b.map(i,function(b){var e=a(g[c+b]),f=e.find("p")[0],h=getComputedStyle(f);d.custom.labelWidths[c+b+"label"]=parseInt(h.width,10)+parseInt(h.paddingLeft,10)+parseInt(h.paddingRight,10)})}function o(c,d,f,g,h){var i=d.width[c],j=e.nonHiddenPageIdsFromMainMenu(f),k=j.concat("__more__"),l=b.map(k,function(b){var f,e=a(h[c+b]);return e.attr("data-originalGapBetweenTextAndBtn")?f=parseInt(e.attr("data-originalGapBetweenTextAndBtn"),10):(d.custom.originalGapBetweenTextAndBtn||(d.custom.originalGapBetweenTextAndBtn={}),d.custom.originalGapBetweenTextAndBtn[c+b+"label"]=d.width[c+b]-d.custom.labelWidths[c+b+"label"],f=d.width[c+b]-d.custom.labelWidths[c+b+"label"]),d.width[c+b]>0?d.custom.labelWidths[c+b+"label"]+f:0}),m=l.pop(),n=g.sameWidthButtons,o=g.stretchButtonsToMenuWidth,p=!1,q=d.custom[c+"menuItemContainerMargins"],r=d.custom[c+"menuItemMarginForAllChildren"],s=d.custom[c+"menuItemContainerExtraPixels"],t=e.getMaxWidth(l),u=e.getDropDownWidthIfOk(i,n,o,l,q,t,r,s);if(!u){for(var v=1;v<=l.length;v++)if(u=e.getDropDownWidthIfOk(i,n,o,l.slice(0,-1*v).concat(m),q,t,r,s)){p=!0;break}u||(p=!0,u=[m])}if(p){var w=u[u.length-1];for(u=u.slice(0,-1);u.length<k.length;)u.push(0);u[u.length-1]=w}return{realWidths:u,moreShown:p}}function p(b,c,d,e,f){var g=a("#"+b+"itemsContainer")[0],i=d[b+"moreContainer"];c.custom[b+"menuItemContainerMargins"]=h(g),c.custom[b+"menuItemContainerExtraPixels"]=j(g,!0),c.custom[b+"needTopOpenMenuUp"]=l(d[b],!0),c.custom[b+"menuItemMarginForAllChildren"]=!f.propertiesItem.stretchButtonsToMenuWidth||"false"!==g.getAttribute("data-marginAllChildren"),n(b,c,e,d);var k=o(b,c,e,f.propertiesItem,d);c.custom[b+"realWidths"]=k.realWidths,c.custom[b+"isMoreShown"]=k.moreShown,c.custom[b+"moreContainerBorderLeft"]=parseInt(a(i).css("border-left"),10)}var e=d.menuUtils;return c.registerPatcher("wysiwyg.viewer.components.menus.DropDownMenu",g),c.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",p),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",m),{}}),define("layout/specificComponents/imageLayout",["zepto","lodash","utils","layout/util/layout"],function(a,b,c,d){"use strict";function h(b,c,d,h,i,j,k){var l=a(c[b]),m=a(c[b+g]),n=d.custom[b]&&d.custom[b].src;if(l.css("width",j.width),l.css("height",j.height),!e.isUrlEmptyOrNone(i.uri)){var o={width:i.width,height:i.height,id:i.uri},p={width:j.width,height:j.height,htmlTag:"img",alignment:f.alignTypes.CENTER,pixelAspectRatio:k?h.mobile.getDevicePixelRatio():1},q=f.getData(i.displayMode,o,p);m.css(q.css.img);var r=h.getMediaFullStaticUrl(q.uri)+q.uri;e.isExternalUrl(q.uri)||r===n||m.attr("src",r)}}var e=c.urlUtils,f=c.imageTransform,g="image";return d.registerCustomMeasure("core.components.Image",function(b,c,d){var e=a(d[b]).children("img")[0];d[b+g]=e,c.custom[b]={src:e.src}}),{patchNodeImage:h}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","utils","zepto","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,b,c,d,e){var g=Math.floor(b+parseInt(a.attr("data-additional-height"),10));return f.getSizeAfterScaling({itemHeight:g,itemWidth:Math.floor(g*(e.aspectRatio||1)),displayerData:c,imageMode:e.imageMode,heightDiff:parseInt(d.attr("data-height-diff"),10)||0,widthDiff:parseInt(d.attr("data-width-diff"),10)||0,bottomGap:parseInt(d.attr("data-bottom-gap"),10)||0})}function i(a,b,e){var f=e[a+"images"],g=c(f).children();b.custom[a+"images"]=g.length,d.forEach(g,function(d,e){var f=a+e,g=c(d),h={width:g.data("displayer-width"),height:g.data("displayer-height"),uri:g.data("displayer-uri")};b.custom[f]={node:d,data:h}})}function j(a,b,d,f,i){var j=d.height[a],k=d.width[a],l=i.isMobileDevice()||i.isMobileView(),m=c(b[a]),n=d.custom[a+"images"];c(b[a]).css({height:j,width:k});for(var o=0;n>o;o++){var p=a+o,q=c(d.custom[p].node),r=d.custom[p].data,s=h(m,j,r,q,f.propertiesItem);g.updateImageWrapperSizes(c(q.children()[0]),s),e.patchNodeImage(p+"image",b,d,i,g.getImageDataForLayout(r),g.getContainerSize(s.imageWrapperSize,c(q)),l)}}var f=b.matrixScalingCalculations,g=b.galleriesCommonLayout;return a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",[["images"],["itemsContainer"]]),a.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",i),a.registerPatcher("wysiwyg.viewer.components.SliderGallery",j),{}}),define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function e(c,e,f){var g=a(e[c]),h=b.filter(f.custom,function(a,b){return d.stringUtils.startsWith(b,c)}),i=b.max(h);g.find("a").each(function(b,c){c.offsetWidth>i&&a(c).css({"text-overflow":"ellipsis"})})}function f(c,d,e){var f=a(e[c]),g=f.find("a.level0"),h=0;b.forEach(g,function(a,b){a.offsetWidth>h&&(h=a.offsetWidth),d.custom[c+"_"+b]=a.offsetWidth});var i=parseInt(e[c].getAttribute("data-param-border")||0,10),j=parseInt(e[c].getAttribute("data-param-padding")||0,10),k=h+2*j+2*i;k>d.width[c]&&(d.width[c]=k),d.height[c]=e[c].clientHeight}return c.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",f),c.registerPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",e),{}}),define("layout/specificComponents/loginButtonLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a,b){var c=a+"container";b.minHeight[a]=b.height[c],b.height[c]>b.height[a]&&(b.height[a]=b.height[c])}function e(b,c,d){var e=b+"container",f=c[e],g=d.height[b],h=d.height[e],i=(g-h)/2;a(f).css({"margin-top":i+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]),c.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",d),c.registerPatcher("wysiwyg.viewer.components.LoginButton",e)}),define("layout/specificComponents/dialogLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(b,c,d){var e=b+"dialog",f=d.height.screen,g=d.height[e],h=c[e],i=c[b];a(i).css({height:f+"px"}),f-g>0&&a(h).css({top:(f-g)/2+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",d)}),define("layout/specificComponents/siteBackgroundLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(b,c,d,h,i){var j=i.isMobileView()&&!i.isMobileDevice()?Math.floor((document.documentElement.scrollWidth-i.getSiteWidth())/2):0,k=f(d),l=g(d,i),m=e(d,i),n=c[b];a(n).css({top:k+"px",height:m+"px",left:j+"px",width:l+"px"})}function e(a,b){var c=a.height[b.getStructureCompId()],d=a.height.screen;return Math.max(d,c)}function f(a){var b=parseInt(a.height.WIX_ADS);b=isNaN(b)?0:b;var c=parseInt(a.top.WIX_ADS);return c=isNaN(c)?0:c,b+c}function g(a,b){var c=a.width[b.getStructureCompId()],d=b.isMobileView()?1:0;return Math.ceil(Math.max(a.width.screen,c)+d)}function h(a){return[[a.getCurrentPageId()]]}c.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",h),c.registerPatcher("wysiwyg.viewer.components.SiteBackground",d)}),define("layout/specificComponents/buttonLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function e(c,e,f){var g=c+"label",h=a(f[c]),i=a(f[g]);e.minHeight[c]=e.height[g],e.minWidth[c]=e.width[g],b.forEach(["width","height"],function(a){e[a][g]>e[a][c]&&(e[a][c]=e[a][g])}),e.custom[c]={align:h.attr("data-align"),margin:parseInt(h.attr("data-margin"),10)},e.custom[g]={hasMarginTopAttribute:!!i.attr(d),marginTop:parseInt(i.attr(d)||i.css("margin-top"),10)||0};var j=e.width[g]+e.custom[c].margin>e.width[c],k=e.custom[c].align;"center"!==k&&(e.custom[g]["margin-"+k]=j?e.width[c]-e.width[g]:e.custom[c].margin)}function f(a,c){var d=a+"label",e=Math.floor((c.height[a]-c.height[d])/2),f={"margin-top":e+c.custom[d].marginTop};return b.each(["margin-left","margin-right"],function(a){f[a]=c.custom[d][a]}),f}function g(b,c,e){var g=b+"label",h=a(c[g]);a(c[b]).css({width:e.width[b],height:e.height[b]}),e.custom[g].hasMarginTopAttribute||h.attr(d,e.custom[g].marginTop),h.css(f(b,e))}var d="data-skin-margin";c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),c.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",e),c.registerPatcher("wysiwyg.viewer.components.SiteButton",g)}),define("layout/specificComponents/photoLayout",["zepto","layout/util/layout","layout/specificComponents/imageLayout","utils"],function(a,b,c,d){"use strict";function f(a){return a===d.imageUtils.displayModes.FIT_WIDTH?d.imageUtils.displayModes.FIT_HEIGHT:e[a]||a}function g(a,b,c){var e={width:b.width[a]-b.custom[a].marginWidth,height:b.height[a]-b.custom[a].marginHeight},f=b.custom[a].exactHeight-b.custom[a].marginHeight;return c===d.imageUtils.displayModes.FIT_HEIGHT&&d.imageUtils.isSameValueButRounded(f,e.height)&&(e.height=f),e}function h(b,c,d){var e=a(d[b]),f=parseInt(e.data("content-padding-horizontal"),10),g=parseInt(e.data("content-padding-vertical"),10),h=parseFloat(e.data("exact-height"));c.height[b]=c.custom[b]&&c.custom[b].thisIsMyHeight||d[b].offsetHeight,c.custom[b]={marginWidth:f,marginHeight:g,exactHeight:h}}function i(b,e,h,i,j){var k=b+"img",l=b+"link",m=i.dataItem,n=i.propertiesItem,o=n&&n.displayMode||"fill",p=f(o),q=d.imageUtils.getContainerSize(g(b,h,p),{width:m.width,height:m.height},p),r={width:q.width+h.custom[b].marginWidth,height:q.height+h.custom[b].marginHeight},s={width:m.width,height:m.height,displayMode:p,uri:m.uri};c.patchNodeImage(k,e,h,j,s,q);var t=a(e[b]);t.css("width",r.width),t.css("height",r.height);var u=a(e[l]);u.css("width",q.width),u.css("height",q.height)}var e={fitWidthStrict:d.imageUtils.displayModes.FIT_WIDTH,fitHeightStrict:d.imageUtils.displayModes.FIT_HEIGHT},j={pathArray:["img"],type:"core.components.Image"};b.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[j,["link"]]),b.registerPatcher("wysiwyg.viewer.components.WPhoto",i),b.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",h),b.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[j,["link"]]),b.registerPatcher("wysiwyg.viewer.components.ClipArt",i),b.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",h)}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(a,b,c,d){"use strict";function e(b,c,e,f,g){var m,n,o,p,h=b+"label",i=b+"img",j=a(c[b]),k=f.dataItem,l=e.width[h];m=e.custom[b].paddingLeft,n=e.custom[b].paddingRight,o=e.custom[b].paddingTop,p=e.height[h];var q=Math.max(e.width[b],l),r={width:q-m-n,height:e.custom[b].imageHeight-o-p},s={width:k.width,height:k.height,displayMode:"full",uri:k.uri};console.log("DOCUMENT_LAYOUT"),d.patchNodeImage(i,c,e,g,s,r),j.width(q)}function f(b,c,d){var e=a(d[b]);c.custom[b]={paddingLeft:e.data("content-padding-left"),paddingRight:e.data("content-padding-right"),paddingTop:e.data("content-padding-top"),imageHeight:e.data("content-image-height")}}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),c.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",f),c.registerPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",e)}),define("layout/util/calculateScreenWidthDimensions",[],function(){"use strict";function a(a,b){return Math.min(parseInt(Math.floor((a-b)/2),10),0)}function b(b,c){var d=c.getSiteWidth(),e=Math.max(d,b.width.screen);return{width:e,left:a(d,e)}}return b}),define("layout/specificComponents/containerAndScreenWidthLayout",["zepto","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b,c){"use strict";function d(a,b,c){b.height[a]=c[a].offsetHeight,f(a,b,c)}function e(a,b,c,e){d(a,b,c),b.minHeight[a]=e.getPageMinHeight(),b.height[a]=b.minHeight[a]}function f(a,b,c){b.containerHeightMargin[a]=c[a].offsetHeight-b.height[a+"inlineContent"]}function g(b,c,d,e){var f=b+"screenWidthBackground";a(c[f]).css({width:d.width.screen,left:i(e.layout.width,d.width.screen)})}function h(b,d,e,f,g){var h=c(e,g);a(d[b]).css({width:h.width,left:h.left+"px"})}function i(a,b){return Math.min(parseInt(Math.floor((a-b)/2),10),0)+"px"}function j(b,c,d,e){var f=e.layout&&e.layout.fixedPosition,g={height:d.height[b],bottom:f?d.siteMarginBottom:"auto",top:f?"auto":d.top[b]};a(c[b]).css(g)}b.registerRequestToMeasureDom("mobile.core.components.Container"),b.registerRequestToMeasureDom("mobile.core.components.Page"),b.registerRequestToMeasureDom("wixapps.integration.components.AppPage"),b.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),b.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),b.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),b.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),b.registerRequestToMeasureChildren("mobile.core.components.Page",[["inlineContent"]]),b.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),b.registerCustomMeasure("mobile.core.components.Container",f),b.registerCustomMeasure("mobile.core.components.Page",e),b.registerCustomMeasure("wixapps.integration.components.AppPage",e),b.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",f),
b.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",d),b.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",f),b.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",f),b.registerPatchers("wysiwyg.viewer.components.FooterContainer",[g,j]),b.registerPatcher("wysiwyg.viewer.components.HeaderContainer",g),b.registerPatcher("wysiwyg.viewer.components.PagesContainer",g),b.registerPatcher("wysiwyg.viewer.components.ScreenWidthContainer",g),b.registerPatcher("wysiwyg.viewer.components.BgImageStrip",h)}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var a={};return{registerCustomMeasure:function(b,c){a[b]=c},getProxiesToMeasure:function(){return a}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout"],function(a,b,c,d,e){"use strict";function g(){var c=b.toArray(arguments).join("");return a("#"+c)[0]}function h(b,c,d){var e=b+f,g=a(c[e]);return g.css({height:"auto"}),d.custom[b]&&d.custom[b].appPartShouldRenderAgain}function i(a,b,c,d){e.measureComponentChildren(a,g,d,c,b)}function j(a,b,c,d){var f=a.compId,h=g(f);b[f]=h;var j=a.structureInfo;j.id=f,j.type=a.compType,i(j,d,b,c),e.maps.classBasedCustomMeasures[a.compType]&&e.maps.classBasedCustomMeasures[a.compType](f,c,b,d,a.structureInfo)}function k(a,b,c){var d=a+f;"loading"!==c[a].attributes["data-state"].value&&(b.height[a]=b.height[d],b.minHeight[a]=b.height[d])}function l(a,d,e,g,h){var i=a.id,k=i+f,l=d.querySelector("#"+k);e.custom[i]=e.custom[i]||{};var m=!1;return b.each(c.getProxiesToMeasure(),function(a,c){var d=o(c,l);e.custom[i][c]=e.custom[i][c]||[],b.map(d,function(b,d){var f=a(b,h,e);e.custom[i][c][d]=f,f.comp&&j(f.comp,g,e,h),f.needsRelayout&&!e.custom[i][c][d].didRelayout&&(m=!0,e.custom[i][c][d].didRelayout=!0)})}),m}function m(a,d,f,g){var h=a.id;d.custom[h].appPartShouldRenderAgain=b.reduce(c.getProxiesToMeasure(),function(a,c,i){var j=d.custom[h][i],k=b.reduce(j,function(a,b){n(b.domManipulations);var c=!1,h=b.comp;return h&&(c=e.patchComponent(h.structureInfo,f,d,g)),a||c},!1);return a||k},!1)}function n(c){b.forEach(c,function(c){var d=a(c.node),e=c.funcName,f=b.isArray(c.params)?c.params:[c.params];b.isFunction(d[e])&&d[e].apply(d,f)})}function o(b,c){return a("[data-proxy-name="+b+"]",c)}var f="inlineContent";return d.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",l,m),d.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",l,m),d.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[f]]),d.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),d.registerCustomMeasure("wixapps.integration.components.AppPart",k),d.registerPatcher("wixapps.integration.components.AppPart",h),d.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[f]]),d.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),d.registerCustomMeasure("wixapps.integration.components.AppPart2",k),d.registerPatcher("wixapps.integration.components.AppPart2",h),{appPartMeasureFunction:k,appPartPatcherFunction:h,inlineContentId:f,preMeasureProxies:l,postPatchProxies:m}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},round:function(a){return Math.round(1e6*a)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPath:function(b){var c=a.trim(b);if(""===c)return[];var d=c.match(/[a-z][^a-z]*/gi),e=d.map(function(b){for(b=b.replace(/-/g," -").replace(/,/g," ");-1!==b.indexOf("  ");)b=b.replace(/ {2}/g," ");return[b.substring(0,1),a.trim(b.substring(1))]});return e.map(function(a){var b,c=[];return-1==="QSCL".indexOf(a[0].toUpperCase())||1!==a[1].split(",").length?a:(b=a[1].split(" "),b.length%2!==0?a:(b.forEach(function(a,b,d){b%2===0&&c.push(a+" "+d[b+1])}),[a[0],c.join(",")]))})},stringifyParsedPath:function(a){var b="";return a.forEach(function(a){a.forEach(function(a){b+=a})}),b}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";var b=function(b,c){return a.round(parseFloat(b)*c)},c=function(a,c,d){var e=a.split(/[\s,]+/);return b(e[0],c)+" "+b(e[1],d)},d=function(b,d,e){if(""===b)return"";var f=b.split(",").map(function(b){return c(a.trim(b),d,e)});return f.join(",")};return{scaleSingleValue:b,scalePairString:c,scaleMultiplePairStrings:d}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler"],function(a,b,c){"use strict";var d=function(){return""},e=function(a,b,d){return c.scaleSingleValue(a,d/(360*b))},f=function(a,b,d){var f=a.split(/[\s,]+/);return 7!==f.length?(console.log("incorrect arc string, should have exactly 7 parameters. (value was "+a),a):(f[0]=c.scaleSingleValue(f[0],b),f[1]=c.scaleSingleValue(f[1],d),f[2]=e(f[2],b,d),f[5]=c.scaleSingleValue(f[5],b),f[6]=c.scaleSingleValue(f[6],d),f.join(" "))},g=function(c,d,e){var f=b.getParsedPath(c.getAttribute("d"));a.forEach(f,function(a){var b=[a[1]],c=a[0].toUpperCase();"V"===c?b.push(e):"H"===c?b.push(d):(b.push(d),b.push(e)),a[1]=h[a[0].toUpperCase()].apply(null,b)}),c.setAttribute("d",b.stringifyParsedPath(f))},h={M:c.scalePairString,L:c.scaleMultiplePairStrings,H:c.scaleSingleValue,V:c.scaleSingleValue,Z:d,C:c.scaleMultiplePairStrings,S:c.scaleMultiplePairStrings,Q:c.scaleMultiplePairStrings,T:c.scalePairString,A:f};return{scale:g}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPoints:function(b){var f,c=a.trim(b),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(b){var c="";return b.forEach(function(a){c+=a.join(",")+" "}),a.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(a,b,c,d){"use strict";return{scale:function(b,e,f){var g=d.getParsedPoints(b.getAttribute("points"));a.forEach(g,function(a){a[0]=c.scaleSingleValue(a[0],e),a[1]=c.scaleSingleValue(a[1],f)}),b.setAttribute("points",d.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("r"),h=Math.min(c,d);e&&f&&(b.setAttribute("cx",a.scaleSingleValue(e,h)),b.setAttribute("cy",a.scaleSingleValue(f,h)),b.setAttribute("r",a.scaleSingleValue(g,h)))}}}),define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";var b=function(b,c,d,e){d&&b.setAttribute(c,a.scaleSingleValue(d,e))},c=function(a){a.setAttribute("x","0"),a.setAttribute("y","0")};return{scale:function(a,d,e){var f=a.getAttribute("width"),g=a.getAttribute("height"),h=a.getAttribute("rx"),i=a.getAttribute("ry");c(a),b(a,"width",f,d),b(a,"height",g,e),b(a,"rx",h,d),b(a,"ry",i,e)}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("rx"),h=b.getAttribute("ry");e&&g&&(b.setAttribute("cx",a.scaleSingleValue(e,c)),b.setAttribute("rx",a.scaleSingleValue(g,c))),f&&h&&(b.setAttribute("cy",a.scaleSingleValue(f,d)),b.setAttribute("ry",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPoints:function(a){var f,c=b.trim(a),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(a){var c="";return a.forEach(function(a){c+=a.join(",")+" "}),b.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(a,b,c,d){"use strict";return{scale:function(b,e,f){var g=d.getParsedPoints(b.getAttribute("points"));g=a.map(g,function(b){return a.map(b,function(a,b){return c.scaleSingleValue(a,b?f:e)})}),b.setAttribute("points",d.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("x1"),f=b.getAttribute("y1"),g=b.getAttribute("x2"),h=b.getAttribute("y2");e&&f&&g&&h&&(b.setAttribute("x1",a.scaleSingleValue(e,c)),b.setAttribute("x2",a.scaleSingleValue(g,c)),b.setAttribute("y1",a.scaleSingleValue(f,d)),b.setAttribute("y2",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){return a(["path","polygon","rect","circle","ellipse","polyline","line"]).contains(b.toLowerCase())},k=function(a,c,d,e){var g,h,k,l,f=c.width/c.height,i=f>e,j=e>f;return a.width?d&&i?(k=c.height*e,g=k/a.width):g=c.width/a.width:g=1,a.height?d&&j?(l=c.width/e,h=l/a.height):h=c.height/a.height:h=1,{scaleX:b.round(g),scaleY:b.round(h)}},l=function(a,b,c){return Math.abs(a.width-b.width)<c&&Math.abs(a.height-b.height)<c},m=function(a,b,c){a.setAttribute("transform","translate("+parseFloat(-1*c.x+.5*b)+","+parseFloat(-1*c.y+.5*b)+")")},n=function(a,b){a.hasAttribute("data-original-aspect-ratio")||(a.setAttribute("data-original-aspect-ratio",b),a.setAttribute("viewBox",""),a.removeAttribute("viewBox"))},o=function(b,o,p,q,r){var s=b.getElementsByTagName("g")[0],t=a.pick(p,["width","height"]),u=a.pick(p,["x","y"]),v={path:c,polygon:d,rect:f,circle:e,ellipse:g,polyline:h,line:i},w=!1;if(!l(o,t,1)){var x=p.width/p.height;n(b,x);var y=k(t,o,r,x);a.filter(s.childNodes,function(a){return j(a.nodeName)}).forEach(function(a){var b=a.nodeName.toLowerCase();w=w||"rect"===b,v[b].scale(a,y.scaleX,y.scaleY)}),m(s,q,{x:w?0:u.x*y.scaleX,y:w?0:u.y*y.scaleY}),b.style.width=Math.ceil(t.width*y.scaleX+q)+"px",b.style.height=Math.ceil(t.height*y.scaleY+q)+"px"}};return{scale:o}}),define("layout/specificComponents/shapeLayout",["lodash","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(a,b,c){"use strict";function d(a,b,c){var d=c[a].getElementsByTagName("g")[0];b.custom[a]=d.getBBox()}function e(a,b,d,e){var f=b[a].getElementsByTagName("svg")[0],g=e.propertiesItem,h=g&&g.maintainAspectRatio,i=e.styleItem,j=parseInt(i&&i.style?i.style.properties.strokewidth:1,10),k={width:d.width[a]-j,height:d.height[a]-j};c.scale(f,k,d.custom[a],j,h)}return b.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",d),b.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",e),{}}),define("layout/specificComponents/richtextLayout",["lodash","zepto","layout/util/layout"],function(a,b,c){"use strict";function e(b){var c=b.getBoundingClientRect(),d=a.toArray(b.children);return c={left:c.right,right:c.left,top:c.bottom,bottom:c.top},c=f(d,c),{x:c.left,y:c.top+window.pageYOffset,width:c.right-c.left,height:c.bottom-c.top}}function f(b,c){c=c||{left:Number.MIN_VALUE,right:Number.MAX_VALUE,top:Number.MIN_VALUE,bottom:Number.MAX_VALUE};var d=document.createRange();return c=a.reduce(b,function(a,b){var c,e=j(b);return e?(d.selectNodeContents(b),c=d.getBoundingClientRect(),c.width&&c.height&&(a.left=Math.min(a.left,c.left),a.top=Math.min(a.top,c.top),a.right=Math.max(a.right,c.right),a.bottom=Math.max(a.bottom,c.bottom))):a=f(b.children,a),a},c)}function g(a){return a.textContent.trim()}function h(a){var b=i(a);return b.sum/b.amount}function i(a){var b,c,d=a.getElementsByTagName("*"),e=j(a),f={amount:0,sum:0,update:function(a,b){var c=parseInt(window.getComputedStyle(a).getPropertyValue("font-size"),10),d=b.length;this.amount+=d,this.sum+=d*c}};for(f.update(a,e),b=0;b<d.length;b++)c=d[b],f.update(c,j(c));return delete f.update,f}function j(a){var b,c,d=a.childNodes,e="";for(b=0;b<d.length;b++)c=d[b],3===c.nodeType&&(e+=c.textContent.trim());return e}function k(a,b,c){c.mobileConversion||(c.mobileConversion={overallBorders:{},averageFontSize:{}}),g(a)&&(c.mobileConversion.overallBorders[b]=e(a),c.mobileConversion.averageFontSize[b]=h(a))}function l(a,c){b(c[a]).css({height:""})}var d="wysiwyg.viewer.components.WRichText";return c.registerPatcher(d,l),c.registerCustomMeasure(d,function(a,b,c){var d=c[a];b.minHeight[a]=d.offsetHeight,k(d,a,b)}),c.registerRequestToMeasureDom(d),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","utils","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function i(a,b,c,d,e,f){return h.getSizeAfterScaling({itemHeight:b,itemWidth:c,displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(f.attr("data-height-diff"),10)||0,widthDiff:parseInt(f.attr("data-width-diff"),10)||0,bottomGap:parseInt(f.attr("data-bottom-gap"),10)||0})}function j(a,b,c){g.measureFlexibleHeightGallery(a,b,c)}function k(a,c,d,h,j){var k=h.propertiesItem,l=d.height[a],m=d.width[a],n=j.isMobileDevice()||j.isMobileView(),o=b(c[a+"itemsContainer"]),p=parseInt(b(c[a]).attr("data-presented-row"),10),q=d.custom[a+"itemsContainer"];b(c[a]).css({height:l,width:m}),o.css({height:l}),b(c[a]).css({height:l,width:m});for(var r=0;q>r;r++){var s=a+r,t=b(d.custom[s].node),u=d.custom[s].data,v=f.getItemWidth(k.margin,k.numCols,m,parseInt(b(c[a]).attr("data-width-diff"),10)||0),w=f.getItemHeight(k.margin,l,p,parseInt(b(c[a]).attr("data-height-diff"),10)||0),x=i(u,w,v,k,b(c[a]),t);g.updateImageWrapperSizes(b(t.children()[0]),x),e.patchNodeImage(s+"image",c,d,j,g.getImageDataForLayout(u),g.getContainerSize(x.imageWrapperSize,t),n)}}var f=c.matrixCalculations,g=c.galleriesCommonLayout,h=c.matrixScalingCalculations;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",j),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",[["itemsContainer"]]),a.registerPatcher("wysiwyg.viewer.components.MatrixGallery",k),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","utils","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,b,c,d,e,g){return f.getSizeAfterScaling({itemHeight:b-(parseInt(e.attr("data-height-diff"),10)||0),itemWidth:c-(parseInt(e.attr("data-height-diff"),10)||0),displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(g.attr("data-height-diff"),10)||0,widthDiff:parseInt(g.attr("data-width-diff"),10)||0,bottomGap:parseInt(g.attr("data-bottom-gap"),10)||0})}function i(a,b,c){g.measureFlexibleHeightGallery(a,b,c)}function j(a,c,d,f,i){var j=f.propertiesItem,k=d.height[a],l=d.width[a],m=i.isMobileDevice()||i.isMobileView(),n=d.custom[a+"itemsContainer"],o=b(c[a+"border"]),p=b(c[a]);if("flexibleHeight"===j.imageMode){var q=a+(n-1),r=b(d.custom[q].node),s=d.custom[q].data,t=h(s,k,l,j,p,r);k=t.displayerSize.height}k=parseInt(c[a].getAttribute("data-min-height"))||k,p.css({height:k,width:l}),o.css({height:k,width:l});for(var u=0;n>u;u++){var v=a+u,w=b(d.custom[v].node),x=d.custom[v].data,y=h(x,k,l,j,b(c[a]),w);g.updateImageWrapperSizes(b(w.children()[0]),y),e.patchNodeImage(v+"image",c,d,i,g.getImageDataForLayout(x),g.getContainerSize(y.imageWrapperSize,w),m)}}var f=c.matrixScalingCalculations,g=c.galleriesCommonLayout;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",i),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",[["border"],["itemsContainer"]]),a.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",j),{}}),define("layout/specificComponents/anchorLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c){var d=c[b];a(d).css({width:"0px"})}b.registerPatcher("wysiwyg.common.components.anchor.viewer.Anchor",c)}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","utils"],function(a,b,c){"use strict";function f(b,e,f,g,h){var i=h.getSiteWidth(),j=20,k=c.domMeasurements.getBoundingRect(e[b],e.SITE_HEADER).left-j;i-=2*j,a(e[b+d]).css({width:i+"px",left:-k+"px"})}function g(a,b,d){b.custom[a]={menuContainerTop:c.domMeasurements.getBoundingRect(d[a]).bottom},b.height[a]=b.height[a+e]}var d="menuContainer",e="menuButton";b.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[d],[e]]),b.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",g),b.registerPatcher("wysiwyg.viewer.components.mobile.TinyMenu",f)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","utils"],function(a,b,c,d,e){"use strict";function h(a,c,e,g,h){var i=h.currentPageInfo.pageItemId,j=h.isMobileDevice()||h.isMobileView(),k=h.getDataByQuery(i),l={width:k.width,height:k.height,displayMode:f.displayModes.CENTER,uri:k.uri},m=e.custom[a],n={width:m.imageContainerWidth,height:m.imageContainerHeight};d.patchNodeImage(a+i+"image",c,e,h,l,n,j);var o=b(c[a+k.id+"panel"]);o&&o.length>0&&o.css({width:n.width}),h.isMobileView()||!h.isMobileDevice()&&!h.isTabletDevice()||(b(c[a+"buttonPrev"]).css("height",e.custom[a].imageContainerHeight),b(c[a+"buttonNext"]).css("height",e.custom[a].imageContainerHeight))}function i(a,c,d,e,f){var g=d.custom[a];b(c[a+"dialogBox"]).css({width:g.imageContainerWidth,minHeight:g.dialogBoxHeight,marginTop:g.marginTop}),h(a,c,d,e,f);var i=f.currentPageInfo.pageItemId,j=b(c[a+i+"description"]),k=b(c[a+i+"ellipsis"]);g.showDescription&&g.descriptionHeight>g.descriptionHeightLimit&&(j.height(g.descriptionHeightLimit),k.show())}function j(a,c,d,e){var f=e.currentPageInfo.pageItemId,h=e.getDataByQuery(f),i=b(d[a]),j=b(d[a+"dialogBox"]),l=k(j);c.custom[a]=g.getDesktopViewDimensions(h,e,c,parseInt(i.data("width-spacer"),10),parseInt(i.data("height-spacer"),10),c.height[a+f+"panel"],l)}function k(a){var b=l(a,"padding-bottom")+l(a,"padding-top"),c=l(a,"padding-right")+l(a,"padding-left");return{horizontal:c,vertical:b}}function l(a,b){return a&&b?parseInt(a.css(b),10)||0:0}function m(a,c){var d=b(c);if("none"!==d.css("display")){var e=parseInt(d.css("line-height"),10);a.showDescription=!0,a.descriptionHeight=d.height(),a.descriptionHeightLimit=Math.floor(2*e)}}function n(a,b,c,d,e){var f=d.currentPageInfo.pageItemId,h=d.getDataByQuery(f),i=g.getMobileViewDimensions(h,d,b),j=c[a+f+"description"];m(i,j),i.isMobileZoom=e,b.custom[a]=i}var f=e.imageUtils,g=e.mediaZoomCalculations,o="wysiwyg.components.imageZoom";c.registerCustomMeasure(o,function(a,b,c,d,e){var f=e.dataItem.id,g=d.isMobileView()?n:j;g(a+f,b,c,d)}),c.registerPatcher(o,function(a,b,c,d,e){var f=d.dataItem.id,g=e.isMobileView()?i:h;g(a+f,b,c,d,e)}),c.registerRequestToMeasureChildren(o,function(a,b,c,d){var e=d.dataItem.id,f=a.currentPageInfo.pageItemId,g={pathArray:[e,f,"image"],type:"core.components.Image"};return a.isMobileView()?[[e],g,[e,"dialogBox"],[e,f,"description"],[e,f,"ellipsis"]]:[[e],g,[e,"dialogBox"],[e,"buttonPrev"],[e,"buttonNext"],[e,f,"panel"]]})}),define("layout/specificComponents/tpaStripGalleryLayout",["layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b){"use strict";function c(a,c,d,e){var f=c[a],g=c[a+"iframe"],h=b(d,e);(e.isMobileView()||e.isMobileDevice())&&(h.left=0,h.width=e.getSiteWidth()),f.style.width=h.width+"px",f.style.left=h.left+"px",g.setAttribute("style","width: "+h.width+"px")}function d(a,b,d,e,f){c(a,b,d,f)}function e(a,b,d,e,f){var g=e.propertiesItem;g.fitToScreenWidth&&c(a,b,d,f)}a.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),a.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),a.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),a.registerPatcher("tpa.viewer.components.StripShowcase",d),a.registerPatcher("tpa.viewer.components.StripSlideshow",d),a.registerPatcher("tpa.viewer.components.Collage",e)}),define("layout/specificComponents/honeycombGalleryLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c,d){b.height[d.currentPageInfo.pageId]=b.height[a]}a.registerCustomMeasure("tpa.viewer.components.Honeycomb",b)}),define("layout/specificComponents/masonryGalleryLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){c.height[b]=a(a(d[b]).find("iframe")).height()}b.registerCustomMeasure("tpa.viewer.components.Masonry",c)}),define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(a){"use strict";function c(a,c,d,e,f){var g=f.propertiesItem.layout,h=b[g+(e.browser.ie?"IE":"")];c.width[a]=h.width,c.height[a]=h.height}var b={"default":{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};return a.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),a.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",c),{}}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,c,d){var e=b(d[a]).find("iframe")[0];e&&(c.height[a]=Math.max(c.height[a],e.offsetHeight))}a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",c)}),define("layout/specificComponents/facebookLikeBoxLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.height[a]=Math.max(b.height[a],b.height[a+"iframe"])}a.registerRequestToMeasureDom("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),a.registerRequestToMeasureChildren("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",[["iframe"]]),a.registerCustomMeasure("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",b)}),define("layout/specificComponents/formMixinLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,c,d){var e=b(d[a]).find("#"+a+"wrapper")[0];e&&(c.height[a]=Math.max(c.height[a],e.offsetHeight))}a.registerCustomMeasure("wysiwyg.viewer.components.ContactForm",c),a.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",c)}),define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].childNodes[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight))}a.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",b)}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(a){"use strict";var b={getColumnSidePadding:function(a,b,c,d){var e="rtl"===d,f=Math.floor(c/b),g=a*f,h=(b-1-a)*f;return{right:e?g:h,left:e?h:g}},getMasonryRowsAndColumns:function(b,c){for(var d=[],e=[],f=[],g=0;c>g;g++)e.push(0),f.push(0);for(var h=0;h<b.length;h++){var i=a.indexOf(e,a.min(e));d.push({col:i,row:f[i],topOffset:e[i]}),e[i]+=b[h],f[i]++}return d}};return b}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(a,b,c,d){"use strict";function e(b){var c=parseInt(a(b).attr("data-columns"),10),d=a(b).attr("data-direction"),e=parseInt(a(b).attr("data-horizontal-gap"),10),f=parseInt(a(b).attr("data-vertical-gap"),10);return{columns:c,direction:d,horizontalGap:e,verticalGap:f}}function f(a){var c=[];return b.each(a.childNodes,function(a){c.push(a.clientHeight)}),c}function g(a){var c=f(a),g=e(a),h=a.childNodes,i=d.getMasonryRowsAndColumns(c,g.columns),j=Math.floor(a.clientWidth/g.columns),k={domManipulations:[],needsRelayout:!0},l=k.domManipulations,m=[];b.map(h,function(a,b){var c=i[b],e=c.row*g.verticalGap+c.topOffset,f=d.getColumnSidePadding(c.col,g.columns,g.horizontalGap,g.direction),h=c.col*j;m.push(e);var k={position:"absolute",top:e+"px","padding-right":f.right+"px","padding-left":f.left+"px"};"rtl"===g.direction?k.right=h+"px":k.left=h+"px",l[b]={node:a,funcName:"css",params:k}});var n=b(h).map(function(a,b){return m[b]+c[b]}).max().value();return l.push({node:a,funcName:"css",params:{height:n+"px"}}),k}c.registerCustomMeasure("PaginatedColumnGalleryProxy",g)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(c,d,e){var f=c.id+"itemsContainer",g=a("#"+f),h=a(c),i=Number(h.attr("data-total-columns")),j=Number(h.attr("data-total-rows")),k=Number(h.attr("data-gap")),l=[],m=g.children();if(m.length){var n=m[0],o=n.getBoundingClientRect(),p=o.width,q=o.height;l=b.map(m,function(b){var c=parseInt(a(b).attr("data-index"),10),d=Math.floor(c/i)%j,e=d*k,f=c%i,g=f*k;return{node:b,funcName:"css",params:{top:d*q+e,left:f*p+g}}})}return e.height[f]=g.height(),e.width[f]=g.width(),e.height[c.id]=h.height(),e.width[c.id]=h.width(),{domManipulations:l}}c.registerCustomMeasure("GalleryProxy",d)}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={width:parseInt(e.attr("data-width"),10),height:parseInt(e.attr("data-height"),10),uri:e.attr("data-uri")},i={displayMode:e.attr("data-display-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,d.custom[g]={thisIsMyHeight:d.height[g]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:g,structureInfo:{dataItem:h,propertiesItem:i,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("Image",c)}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";function b(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}a.registerCustomMeasure("Button",b),a.registerCustomMeasure("Button2",b)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";a.registerCustomMeasure("MediaLabel",function(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={aspectRatio:e.attr("data-aspect-ratio"),imageMode:e.attr("data-image-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:g,structureInfo:{dataItem:null,propertiesItem:h,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("SliderGallery",c)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto"],function(a,b){"use strict";a.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),a.registerPatcher("wysiwyg.viewer.components.MediaRichText",function(a,c,d){var e=b(c[a]),f=e.attr("data-width"),g=parseInt(d.width[a],10);return f&&parseInt(f,10)===g?(e.css({height:""}),!1):(e.attr("data-width",g),!0)})}),define("layout/specificComponents/singleAudioPlayerLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",function(a,b,c){var d=c[a];b.height[a]=d.clientHeight,b.width[a]=d.clientWidth})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,b,c){b.custom[a+"siteStructureBoundingClientRect"]=c.SITE_STRUCTURE.getBoundingClientRect()}function d(a,c,d){var e=b(c[a]).find("div")[0];b(e).css({right:d.custom[a+"siteStructureBoundingClientRect"].left})}a.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",c),a.registerPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",d)}),define("layout/specificComponents/appPartZoomLayout",["zepto","layout/util/layout","layout/specificComponents/wixappsLayout"],function(a,b,c){"use strict";function d(a){return a.appPartName?a.id:a.dataItemRef.slice(1)}function e(a,b){var c=b.id,e=d(b);return a+c+e}function f(b,c,d){var e=b+"inlineContent",f=a(c[e]),g=Math.max(d.height[b],d.height.screen);f.css({height:g})}function g(b,c,d,e){var f=a(d[b]),g=Math.max(e.height[c],e.height.screen);f.css({height:g})}b.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(a,b,e,f){var g=d(f.dataItem),h=f.dataItem.id;return[[h,g],[h,g,c.inlineContentId]]}),b.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){var h=e(a,g.dataItem);c.appPartMeasureFunction(h,b,d,f),b.custom[a]={marginTop:Math.max((b.height.screen-b.height[h])/2,0),height:b.height[h]}}),b.registerPatcher("wixapps.integration.components.AppPartZoom",function(a,b,d,h,i){var j=e(a,h.dataItem);i.isMobileView()?(g(a,j,b,d),f(j,b,d)):c.appPartPatcherFunction(j,b,d,null,i)}),b.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(b,d,f,g,h){var i=h.getDataByQuery(b.dataQuery),j=e(b.id,i),k={id:j},l=a("#"+j)[0];return c.preMeasureProxies(k,l,f,g,h)},function(a,b,d,f){var g=f.getDataByQuery(a.dataQuery),h=e(a.id,g),i={id:h};return c.postPatchProxies(i,b,d,f)})}),define("layout/specificComponents/headerContainerLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",function(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition}})}),define("layout/specificComponents/footerContainerLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",function(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition}})}),define("layout/specificComponents/wTwitterTweetLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(a,b,c,d){d.isMobileView()&&(b.width[a]=c[a].clientWidth,b.height[a]=c[a].clientHeight)}b.registerCustomMeasure("wysiwyg.viewer.components.WTwitterTweet",c)}),define("layout/specificComponents/wTwitterFollowLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(a,b,c){b.height[a]=c[a].offsetHeight,b.width[a]=c[a].offsetWidth}b.registerCustomMeasure("wysiwyg.viewer.components.WTwitterFollow",c)}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].children[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight),
b.width[a]=Math.max(b.width[a],d.offsetWidth))}a.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","utils","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,d,h,i,j,k,l,m){var n=j.isMobileDevice()||j.isMobileView();c.forEach(a,function(a,c){var o=f.getItemPosition(c,d,h,i.margin,i.numCols);b(a).css({width:d,height:h,left:o.left,top:o.top});var p=b(a).attr("data-query"),q=j.getDataByQuery(p,j.currentPageInfo.pageId);e.patchNodeImage(m+"image",k,l,j,g.getImageDataForLayout(q),{width:d,height:h},n)})}var f=d.matrixCalculations,g=d.galleriesCommonLayout;return a.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",function(a,c,d,e,g){var i=d.height[a],j=d.width[a],k=parseInt(b(c[a]).attr("data-height-diff"),10),l=parseInt(b(c[a]).attr("data-width-diff"),10),m=c[a+"itemsContainer"],n=e.propertiesItem;b(m).css({width:j-l,height:i-k});var o=f.getItemWidth(n.margin,n.numCols,j,l),p=f.getAvailableRowsNumber(n.maxRows,n.numCols,e.dataItem.items.length),q=f.getItemHeight(n.margin,i,p,k);h(b(m).children('div[data-page-desc="next"]'),o,q,n,g,c,d,a),h(b(m).children('div[data-page-desc="prev"]'),o,q,n,g,c,d,a),h(b(m).children('div[data-page-desc="curr"]'),o,q,n,g,c,d,a)}),{}}),define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/PinItPinWidgetLayout","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/buttonLayout","layout/specificComponents/photoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaStripGalleryLayout","layout/specificComponents/honeycombGalleryLayout","layout/specificComponents/masonryGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeBoxLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/singleAudioPlayerLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/headerContainerLayout","layout/specificComponents/footerContainerLayout","layout/specificComponents/wTwitterTweetLayout","layout/specificComponents/wTwitterFollowLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout"],function(a){"use strict";return a});